"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}var d3=window.d3,Vue=window.Vue,$=window.$;!function(e){var t=void 0,o=void 0,a=d3.scale.linear().domain([860,13e3]).range(["#ffb62a","#503604"]),r=d3.select(".area-desktop-map").append("svg").attr("width","100%").attr("height",$(".area-intro").height()),n=d3.select(".area-mobile-map").append("svg").attr("width","100%").attr("height",.35*$(e).height()),i={},l={topHigh:1e4,high:5e3,middle:1e3,little:750},d={topHigh:{comment:"就像這行字一樣你說擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠擠不擠",word:"這整整高出平均13倍以上啊！"},high:{comment:"就像剛進入熱戀期的情侶一樣，距離愈變愈近，手腳愈來愈快...",word:"完蛋！要警覺啊！"},middle:{comment:"就像一種活在悠閒大都市的感覺吧！有時慢活，有時擁擠 ",word:"以平均來說，還算不錯吧！"},little:{comment:"就像是剛做好的鮪魚蛋土司，不油不膩，空間舒適度相對來說 ",word:"相當不錯呢！"},less:{comment:"就像加長型King-Size總統套房彈簧床，怎麼滾都滾不到盡頭的那種... ",word:"人呢？好像不怎麼熱鬧啊..."}},s=function(e,t){$("#intro-comment").text(e),$("#intro-word").text(t),$("#mobile-comment").text(e),$("#mobile-word").text(t)},c=function(e){e>=l.topHigh?s(d.topHigh.comment,d.topHigh.word):e>=l.high?s(d.high.comment,d.high.word):e>=l.middle?s(d.middle.comment,d.middle.word):e>=l.little?s(d.little.comment,d.little.word):s(d.less.comment,d.less.word)};d3.csv("./src/data/population_num.csv",function(e){new Vue({delimiters:["${","}"],el:"#table-list",data:{dataArray:e},computed:{descendPopulation:function(){return[].concat(_toConsumableArray(this.dataArray)).sort(function(e,t){return parseFloat(t.population.replace(/,/gi,""))-parseFloat(e.population.replace(/,/gi,""))})},descendDensity:function(){var e=[].concat(_toConsumableArray(this.dataArray));return e.sort(function(e,t){return parseFloat(t.density.replace(/,/gi,""))-parseFloat(e.density.replace(/,/gi,""))}),[e[13]].concat(_toConsumableArray(e))},descendLand:function(){return[].concat(_toConsumableArray(this.dataArray)).sort(function(e,t){return parseFloat(t.land.replace(/,/gi,""))-parseFloat(e.land.replace(/,/gi,""))})}}});t=function(e){var t={};return i.population=parseFloat(e[0].population.replace(/,/gi,"")),i.land=parseFloat(e[0].land.replace(/,/gi,"")),i.density=parseFloat(e[0].density.replace(/,/gi,"")),e.forEach(function(e){var o=parseFloat(e.population.replace(/,/gi,"")),a=parseFloat(e.land.replace(/,/gi,"")),r=parseFloat(e.density.replace(/,/gi,""));t[e.area.replace(/\s/gi,"")]={numberHold:e.numberHold,isDensityOver:r>i.density,density:formatFloat(r,0),landPercent:formatFloat(a/i.land*100,1),populationPercent:formatFloat(o/i.population*100,1)}}),t}(e)}),d3.json("./src/data/tainan-town.topo.json",function(e){var n=d3.geo.path().projection(d3.geo.mercator().center([120.72,23.1]).scale(35e3));o=topojson.feature(e,e.objects.tainan).features,r.selectAll("path").data(o).enter().append("path").attr({d:n,fill:function(e){var o=e.properties.TOWNNAME;return t[o].isDensityOver?a(t[o].density):"#D7DAE1"},stroke:"white","stroke-width":"1.5px"}).on("mouseover",function(e){var o=e.properties.TOWNNAME,a=t[o].density;d3.select(this).style({stroke:"#333","stroke-width":"6px"}),$(".intro-area").text(o),$("#intro-population-percent").text(t[o].populationPercent+"%"),$("#intro-land-percent").text(t[o].landPercent+"%"),$("#intro-density").text(a),c(a),t[o].isDensityOver?$("#intro-density").addClass("p-font-600 color-red"):$("#intro-density").removeClass("p-font-600 color-red")}).on("mouseleave",function(e){d3.select(this).style({stroke:"white","stroke-width":"1.5px"})})});var p=function(e){n.selectAll("*").remove();var a=d3.geo.path().projection(d3.geo.mercator().center([121.2,22.81]).scale(21e3));n.selectAll("path").data(o).enter().append("path").attr({d:a,fill:function(t){return t.properties.TOWNNAME===e?"#FFAA0A":"#D7DAE1"},stroke:"white","stroke-width":"1.5px"});var r=t[e].density;$("#mobile-area").text(e),$("mobile-population-percent").text(e),$("#mobile-population-percent").text(t[e].populationPercent+"%"),$("#mobile-land-percent").text(t[e].landPercent+"%"),$("#mobile-density").text(r),c(r),t[e].isDensityOver?$("#mobile-density").addClass("p-font-600 color-red"):$("#mobile-density").removeClass("p-font-600 color-red")};$(".ui.dropdown").dropdown({onChange:function(e,t){$("#map-modal").modal("show"),p(t)}}),$(".ui.pointing.menu .item").click(function(){var e=$(this).data("container");$(".container.active").removeClass("active"),$("."+e).addClass("active"),$(".item.active").removeClass("active"),$(this).addClass("active")})}(window);